@using Cinema.IVH7B4.Domain.Entities
@using Cinema.IVH7B4.WebUI.Models
@model Cinema.IVH7B4.WebUI.Models.CinemaViewModel

@{
    ViewBag.Title = "Zoekresultaten";
}
@Html.Partial("~/Views/Shared/_Menubar.cshtml")
<div class="text-center">
    <h2>Eerstkomende films na @ViewBag.selectedDate @ViewBag.selectedTime</h2>
    <h3>@ViewBag.numberOfResults resultaten</h3>
    <hr />
</div>

<!------------------------------------- Show all found showings ------------------------------>
<div class="row">
    <div class="col-xs-2"></div>

    <div class="col-xs-8">
        <!-- Loop through the list of showings and show them -->
        @for(int i = 0; i < ViewBag.numberOfResults; i++)
        {
            Showing s = ViewBag.resultShowings[i];
            Film f = ViewBag.resultFilms[i];

            <div class="well">
                <div class="row">
                    <div class="col-xs-2">
                        <p>Zaal: @s.Room.RoomNumber</p>
                        <p>Begintijd: @s.BeginDateTime</p>
                        <p>Eindtijd: @s.EndDateTime</p>
                        <p>
                            3D: @if (@f.Is3D == true)
                                {
                                    string ja = "Ja";
                                    @ja
                                }
                                else
                                {
                                    string nee = "Nee";
                                    @nee
                                }
                        </p>

                        @if (@f.Website != null)
                        {
                            <a href="@f.Website">Website</a>
                        }
                        <br />
                        @if (@f.IMDB != null)
                        {
                            <a href="@f.IMDB">IMDb</a>
                        }

                    </div>
                    

                    <div class="col-xs-3">
                        @if (@f.Image != null)
                        {
                            <img class="img-responsive" src="@(((byte[]) f.Image).getImageByteCode())"/>
                        }
                        else
                        {
                            <img class="img-responsive" src="https://www.articleonepartners.com/wp-content/uploads/2015/06/1000px-Clapboard.svg_.png" alt="Film picture"/>
                        }
                    </div>

                    <div class="col-xs-5">
                        <div class="text-center">
                            <h3>@f.Name</h3>
                        </div>
                        
                        <div class="embed-responsive embed-responsive-16by9 text-center">
                            @if (@f.Trailer != null)
                            {
                                <iframe class="embed-responsive-item" src="@f.Trailer" frameborder="0" allowfullscreen></iframe>
                            }
                        </div>

                        <p>Duur: @f.Length</p>
                        <p style="float: right">Taal: @f.Language</p>
                        <p>Genre: @f.FilmType</p>
                        <p style="float: right">Ondertiteling: @f.LanguageSubs</p>
                        <p>Leeftijd: @f.Age</p>
                        @if (@f.Protagonist != null)
                        {
                            <p>Hoofdrolspeler: @f.Protagonist</p>
                        }
                        @if (@f.Director != null)
                        {
                            <p>Regisseur: @f.Director</p>
                        }
                        <p>@f.Description</p>
                    </div>
                    


                    <div class="col-xs-2 text-center">
                        <button class="btn btn-success" type="button" onclick="location.href = '@Url.Action("Redirect", "UpcomingFilm", new {s = s.ShowingID, f = f.FilmID})'">Bestel kaartje(s)</button>
                    </div>
                </div>

            </div>
        }
    </div>

    <div class="col-xs-2"></div>

</div>